---
import type { MarkdownInstance } from 'astro';
import Section from './Section.astro';
import { Image } from "@astrojs/image/components"
import { importImage } from "../../lib/importImage"

interface SectionFrontmatter {
	title: string;
	sort: number;
	thumbnail: string;
	alt: string;
}

export interface Props {
	sections: MarkdownInstance<SectionFrontmatter>[];
}

const { sections } = Astro.props as Props;

sections.sort((a, b) => a.frontmatter.sort - b.frontmatter.sort);
---

<section>
	{
		sections.map(({ Content, frontmatter }) => (
			<Section>
				<h2 slot="title">{frontmatter.title}</h2>
				<Image slot="image" src={importImage(frontmatter.thumbnail)} alt={frontmatter.alt} loading="lazy" width={500} aspectRation="3:2" fit="cover"/>
				<Content />
			</Section>
		))
	}
	<slot />
</section>

<style>
	section {
		margin: 1em 0 3em;
	}
</style>
